LPSZOJ Change Log
===============

该文件显示了各版本间的改变。`Enh` 表示添加新功能，`Chg` 表示修改功能，`Bug` 表示修复 Bug。

方括号内标注的 `web` 表示只修改了 Web 端；`db` 表示修改了数据库；`judge` 表示修改了判题部分。

- `web`: 意味着你只需要获取最新 Gitee 文件来更新即可。
- `db`: 意味着需要你在 `lpszoj` 目录下执行 `./yii migrate` 来更新数据库
- `judge`: 意味着需要你重新编译判题机并重新启动

请阅读 [update.md](https://gitee.com/yhssdl/lpszoj/raw/master/docs/update.md) 来获取更新方法。

---------------------------------------
- 2023.12.19 Enh: [web] 小组比赛中新增了克隆功能，可快速将作业或比赛克隆到其它小组。
- 2023.12.18 Enh: [web] 查看代码的界面中，添加了代码复制功能。
- 2023.12.17 Chg: [web] 小组比赛创建后，直接跳转到添加题目的界面。
- 2023.12.17 Bug: [web] 处理了VIP题目的上一题与下一题的问题。
- 2023.12.17 Bug: [web] 处理了个现因反序列函数异常导致的错误。
- 2023.12.13 Bug: [web] 修正小组状态界面，点击搜索按钮后，无法查看测评结果的BUG。
- 2023.12.13 Bug: [web] 修正小组作业与比赛中，提交记录查看过题信息的BUG。
- 2023.12.13 Bug: [web] 修正代码提交框中python语言的缩进问题。
- 2023.12.12 Chg: [web] 优化榜单中ajax的调用逻辑。。
- 2023.12.11 Chg: [web] 调整KaTeX默认字体大小为1.1em，大小更协调。
- 2023.12.10 Bug: [web] 修正比赛与小组作业的榜单中，点击做题方面的BUG。
- 2023.12.8 Chg: [web] 后台比赛管理中，题目的位置从下方移到上方。
- 2023.12.8 Enh: [web] 后台训练中添加题目改为从题库中选题。
- 2023.12.6 Bug: [web] 修正了小组作业中查看状态时，未设置封榜时间可能出现的异常。
- 2023.11.25 Enh: [web] 改进小组作业与后台比赛添加题目的界面，直接从题库中选择。
- 2023.11.25 Enh: [web] 比赛与小组作业的榜单中，添加了ajax自动刷新选项。
- 2023.11.21 Enh: [web] 一键安装脚本，新增对Alpine Linux系统的支持。
- 2023.11.21 Bug: [web] 修正ajax更新测评结果中的BUG。
- 2023.11.19 Bug: [web] 修正polygon验题时异常的BUG，并使用ajax更新测评结果。
- 2023.6.16 Bug: [web] 修正usort函数可能异常的情况。
- 2023.6.15 Enh: [web、db] 状态界面增加了IP地址，管理员可查看提交时的IP地址。
- 2023.6.15 Bug: [judge] 修正Ubuntu 23与Debian 12上判题机的系统函数调用权限问题。
- 2023.6.15 Enh: [web] 更新一键安装脚本，添加对Ubuntu 23系统的支持，默认安装PHP 8.1。
- 2023.6.13 Enh: [web] 更新一键安装脚本，添加对Debian 12系统的支持，默认安装PHP 8.2。
- 2023.6.13 Enh: [web] Yii框架升级到2.0.48，新框架可以支持PHP 8.X版本。
- 2023.6.6 Chg: [web] 训练与永久比赛中的提交，记入排行榜中。
- 2023.6.5 Enh: [judge] 优化题目状态的更新，由原来的每天0点更新改为空闲1分钟后就自动更新。
- 2023.5.30 Bug: [web] 修正了训练中小节显示的一个BUG，修正了个人排位赛榜单成绩问题。
- 2023.5.30 Enh: [web] 后台比赛界面，增加了成绩导出功能。
- 2023.5.30 Enh: [web] 后台用户与题目界面的优化，增加批量设置学校的功能。
- 2023.5.14 Enh: [web] 新增题目导出功能，可导出XML格式的文件，支持内容内嵌图片。
- 2023.5.13 Bug: [web] 修正导入xml题目时，含多个题目时只能导入第1个的情况。
- 2023.5.13 Bug: [web、db] 将默认字符集修改为utf8mb4，可解决个别表情图或4字节特殊字符无法使用的情况，mysql版本至少5.7版。
- 2022.11.3 Enh: [web、db] 后台用户管理添加了备注字段，方便对部分用户备注信息。
- 2022.11.2 Enh: [web] 前后状态界面添加每页数量的选项。
- 2022.11.2 Enh: [web] 台后题目管理界面添加每页数量的选项。
- 2022.11.2 Enh: [web] 台后用户管理界面优化，添加了每页数量的选项。
- 2022.11.2 Enh: [web] 小组比赛添加了公开与隐藏选项。
- 2022.11.1 Enh: [web] 后台用户管理中，增加禁用用户功能。
- 2022.11.1 Bug: [web] 修正小组比赛设置界面中，题目超链接的错误。
- 2022.11.1 Enh: [web] 小组比赛添加了公开与隐藏选项。
- 2022.9.28 Enh: [judge] 修改了judge判题机代码，用于支持ARM平台，已经在华为悦盒EC6108V9C上刷Ubunut后测试通过，64位ARM平台未测试。
- 2022.5.28 Bug: [web] 一键安装脚本中数据库密码由123456改为随机密码，增强安全性。
- 2022.5.26 Bug: [web] 修正比赛或作业修改题目时显示不更新的BUG。
- 2022.5.26 Bug: [web] 优化代码分享与错误查看功能，后台增加了选项。
- 2022.5.24 Bug: [web、db] 后台增加数据库 SQL 命令自定义与运行功能。
- 2022.5.24 Bug: [web] 后台增加数据库备份与恢复功能。
- 2022.5.22 Bug: [web、db] 新增训练模式,可以让练习方式变得更加丰富。
- 2022.5.8 Bug: [web] 修复了Debian 11系统一键安装时第一次会失败，需要再次安装才能成功的情况。
- 2022.5.8 Enh: [web、db] 增加了是否启用Polygon出题系统的选项。
- 2022.5.7 Bug: [web、db] 修正了部分前期修改后出现的BUG，增加了答题模式的选项。
- 2022.5.6 Enh: [web、db] 后台增加了显示或关闭导航栏中状态菜单的功能。
- 2022.5.6 Enh: [web、db] 问题中的解题界面增加了查看解题的选项。
- 2022.5.5 Chg: [web] 对问题列表的标签进行多彩美化。
- 2022.5.4 Enh: [web、db] 美化了小组列表界面，增加了小组LOGO图标自定义。
- 2022.5.4 Enh: [web、db] 网站首页进行了改写，更加美观大方。
- 2022.5.3 Enh: [web] 比赛界面重新进行了制作，美化界面并增强了搜索功能。
- 2022.5.2 Enh: [web] 继续整体界面的美化。
- 2022.5.1 Enh: [web、db] 整体界面的美化，添加数据库字段。
- 2022.4.29 Enh: [web] 整体界面的美化，参考SCNUOJ。
- 2022.4.22 Enh: [web] 更新一键安装脚本，支持Debian 11一键安装。
- 2022.4.22 Chg: [web] 更新安装文档，使用Debian 11系统安装。
- 2022.4.22 Chg: [web] 管理员可查看隐藏状态的解题。
- 2022.4.22 Enh: [web] 比赛与作业设置中，增加了答疑界面的开关选项。
- 2022.4.22 Bug: [web] 禁止直接通过修改网页代码方式修改用户昵称。
- 2022.4.22 Bug: [web] 排行榜不再统计比赛期间的解题数量，以避免比赛结果提前泄漏
- 2022.4.19 Bug: [web] 比赛界面显示问题的修改。
- 2021.6.15 Bug: [web] 后台批量设置用户时，跳过对自己的修改。
- 2021.6.15 Bug: [web] 修正了小组中组长邀请自己时出现组长权限丢失的BUG。
- 2021.3.23 Enh: [web] 后台用户管理中，开放用户删除功能，同时删除该用户解题等相关数据
- 2021.3.11 Chg: [judge] 解题统计信息改为每天更新一次，减轻数据库压力的同时判题速度翻了几翻
- 2021.3.11 Bug: [web] 用户信息与小组排行不再统计比赛期间的解题数量，以避免比赛结果提前泄漏
- 2021.3.4 Enh: [web] 后台用户列表，添加了用户详情的超链接
- 2021.3.4 Bug: [web] 修复修改用户权限时报内部错误的情况
- 2021.3.4 Bug: [web] 修复小组创建后不添加题目，可能显示错误的情况
- 2021.2.23 Enh: [sh] 一键安装的脚本中，增加了判题机服务自动启动
- 2021.2.21 Enh: [sh] 一键安装的脚本中，支持Ubuntu与CentOS 7.X/8.X的安装
- 2021.2.20 Bug: [web] 修复 PHP 7.4 环境下部分操作报内部错误的问题
- 2021.2.20 Bug: [web] 修复一键安装后，添加参赛用户与小组邀请成员会出现用户不存在的情况
- 2021.2.20 Bug: [web] 修复创建小组后，显示错误不能进入的BUG
- 2021.1.17 Bug: [web] 修复测试点详情转义问题
- 2021.1.12 Enh: [web] 小组成员列表中，增加了解题数量，默认从高到低排列，可点击“角色”与“通过数”切换排序
- 2020.12.24 Bug: [web] 修正小组中做题提交间隔无效的BUG、后台验题一个BUG
- 2020.12.23 Enh: [web] 管理员在查看用户信息页面时，增加了重置用户昵称、专业等功能
- 2020.12.22 Enh: [web、db] 增加了网站公告显示功能以及后台选项。（数据库setting表中，需要增加两项内容）
- 2020.12.22 Chg: [web] 首页新闻内容展示方式进行更改，直接将新闻内容显示在首页上
- 2020.11.16 Enh: [web] 小组作业与后台比赛创建时，增加了指定编程语言的选项，可以强制指定比赛的编程语言
- 2020.10.25 Chg: [web] 调整用户登录加密参数，默认加密时用户登录需要0.5秒验证计算，调整后速度会快很多
- 2020.10.25 Enh: [web] 私有(VIP)题目绿色显示，后台增加普通用户是否显示私有题目的选项
- 2020.10.25 Chg: [web] KindEditor图片上传模式调整
- 2020.10.25 Bug: [web] 修复Markdown编辑器的图片上传功能
- 2020.10.25 Bug: [web] 在CentOS 8中运行Python出错的处理
- 2020.10.25 Enh: [web] 增加提交间隔时间的功能与后台选项
- 2020.10.20 Chg: [web] 对部分英语的地方进行了翻译
- 2020.10.20 Enh: [web] 后台加入小组密码与昵称重置的选项，以及组长直接拉成员的选项
- 2020.10.20 Chg: [web] 题目页面，时间限制与在内存限制位置调整，优化显示
- 2020.10.20 Enh: [web] 比赛与小组作业添加题目时，增加了同时添加多个题目的支持
- 2020.10.20 Enh: [web] 批量创建用户时，增加用户名/昵称/密码模式
- 2020.10.20 Chg: [web] 小组作业创建默认改为作业模式
- 2020.10.20 Chg: [web] 调整代码提交后，显示结果的速度，新版题目提交界面的显示结果速度太慢，造成显示不及时
- 2020.10.19 Bug: [web] 修正了小组作业设置界面导航部分链接错误的情况
- 2020.10.19 Enh: [web] 小组用户列表中,鼠标停留昵称上显示用户名
- 2020.10.19 Bug: [web] 小组中的普通成员，按用户创建顺序排序，修正翻页后用户显示重复或缺失的情况
- 2020.10.19 Chg: [web] 批量添加账号时，同密码的情况，加快创建速度
- 2020.10.17 Chg: [web] 问题列表中的TAG标签美化
- 2020.10.17 Chg: [web] 添加上下的导航条，并增加首页与尾页按钮
- 2020.10.17 Enh: [web] 添加通过率的百分比与进度条
- 2020.10.17 Chg: [web] 去除最上方的蓝灰色LOGO栏，美化导航栏底栏，添加圆角与阴影
- 2020.10.17 Enh: [web、db] 后台设置界面，增加“用户注册”、“开启讨论”、“用户昵称”等的开关
- 2020.10.17 Bug: [web] 后台批量用户生成不能进入设置以及批量中只能用空格不能用tab键分开的处理
- 2020.10.17 Chg: [web] 小组邀请成员改为批量邀请
- 2020.10.17 Chg: [web] 运行结果查看时，已经通过的绿色测试点，去掉超链接展开的功能，字体改小一些，对错小图标的数量修复
- 2020.10.17 Enh: [web] 小组中的组长与管理员，添加重置普通成员的密码与昵称功能
- 2020.10.17 Enh: [web、db] 增加编辑器kindEditor，以及在后台增加编辑器的相关选项

###JNOJ
---------------------------------------

- 2020.7.29 Chg: [web] 切换markdown编辑器，**以markdown显示，可能会让题面有一些显示错乱的问题**
- 2020.7.26 Enh: [web] 后台批量生成帐号
- 2020.6.23 Bug: [web] 标签去除多余空格
- 2020.5.27 Enh: [web] 添加切换OJ语言选型
- 2020.5.3 Bug: [web] 登陆不存在的用户名会报错
- 2020.1.5 Enh: [web] 全新的刷题界面

- 2019.12.29 Enh: [judge、polygon] 将测评机加入开机自启动。如需加入开机启动，见 [docs/autostart.md](./docs/autostart.md)。
- 2019.12.26 Enh: [web、db] 添加找回密码、验证用户邮箱的功能。您可能需要到 `后台-设置` 管理配置 SMTP 发送邮件

    此更新涉及到数据库，需要你在 `lpszoj` 目录下执行 `./yii migrate` 来更新数据库。
    
    需要你执行 `sudo rm -rf lpszoj/runtime/*` 清空缓存 (注意此处路径是删除 `lpszoj/runtime` 目录下所有文件)
- 2019.12.24 Enh: [web] 在前台的问题详情页加入 "上一题、下一题" 功能
- 2019.12.22 Enh: [web] 新增后台批量删除题目
- 2019.12.22 Enh: [web] 给 IOI 榜单加入题目通过总时间的排名显示
- 2019.12.17 Chg: [web] 将某些 js 插件的引入由 cdn 改成本地
- 2019.12.17 Enh: [web] 改善 OI、IOI 榜单的显示
- 2019.12.17 Bug: [polygon] 测评机无法编译 C++ 正则表达式
- 2019.12.16 Bug: [judge] 测评机无法编译 C++ 正则表达式
- 2019.12.12 Enh: [web] 首页新闻分页按钮
- 2019.12.12 Chg: [web] 前台的 OI 榜单对管理员用户可见
- 2019.12.11 Enh: [web] 优化与 OI 榜单相关设置
- 2019.12.2 Chg: [polygon] 修改 Polygon 时间、内存限制为题面限制。更新时需要在 `lpszoj/polygon` 目录下执行 `make` 命令
- 2019.12.1 Chg: [web] 默认显示比赛期间的榜单
- 2019.12.1 Bug: [web] 修复一个滚榜数据榜单不对的 Bug
- 2019.12.1 Enh: [web] 更新 vendor
- 2019.12.1 Bug: [web] 封榜后可能通过某些途径查看封榜后提交状态
- 2019.12.1 Enh: [web] 添加一个比赛期间任何人均可访问的比赛榜单页面
- 2019.11.30 Enh: [web] 添加后台比赛提交记录自动刷新功能
- 2019.11.30 Bug: [web] 一个会导致现场赛用户账号重复的问题
- 2019.11.9 Enh: [web] 改进后台查看测试数据文件，避免无法读取大测试点
- 2019.11.9 Bug: [web] 存在某些测评不能正常显示错误信息点
- 2019.10.11 Bug: [judge] 测评机在 32 位环境下无法测评C、C++
- 2019.10.11 Bug: [web] 修复一些漏洞
- 2019.10.7 Bug: [web] 修复一些漏洞 
- 2019.9.28 Enh: [web] 可以下载比赛期间的提交，以用于查重（此功能在后台-比赛-某场比赛-提交记录里）
- 2019.9.28 Chg: [web] 比赛结束状态的代码重构（对功能无任何影响）
- 2019.9.28 Bug: [web] 比赛结束五分钟内禁止提交

0.9.0 2019.9.18
------------------
- Enh: [web、judge、db] 支持 OI 判题模式。**不兼容更新，更新后需要到后台设置页面修改oj名称、学校名称**
- Enh: [web] 私有比赛、作业模式。将比赛设为私有时，任何时候均只能由参赛用户访问。
- Bug: [web] 删除参赛用户导致无法访问榜单
- Bug: [web] 部分页面无法显示 katex 公式
- Enh: [web、db] 新增小组功能，可以创建小组，小组内可以创建比赛。**不兼容更新：移除作业功能，将作业功能放置在小组内创建**
- Enh: [web] 完善小组管理机制
- Enh: [web] 小组作业题解编辑
- Enh: [judge] OI 模式下存在子任务时，若子任务出错则不再测评该子任务
- Bug: [web] 比赛修改题目后状态页出错
- Bug: [web] 同一个用户可多次加入小组
- Enh: [web] 改进题目状态查询机制
- Bug: [judge] 可能的评测bug(TLE->RE)
- Enh: [web、db] 新增题目题解功能。每道题目都可以单独编写题解
- Enh: [web] 可以创建、编辑可以自定义题目 ID，以保持题目ID的连贯性
- Enh: [web] 可以删除题目讨论
- Bug: [web] OI赛制下比赛依然可以看到过题情况
- Enh: [web] OI赛制可以实时显示榜单
- Bug: [web] 比赛积分的计算问题
- Enh: [web] 管理员有权将隐藏题目添加到小组题目中
- Enh: [web] 比赛信息页显示过题情况
- Enh: [web] 增加 IOI 赛制、作业赛制
- Chg: [web] 图片改用相对路径
- Enh: [web] 管理员可查看所有小组
- Enh: [web] 改进 OI 榜单的显示
- Enh: [web、polygon] 改进 polygon。需要重新对 polygon 进行编译
- Enh: [web] 比赛结束五分钟后开放提交
- Bug: [web] 比赛页面切换题目不出现复制按钮
- Enh: [web] 当比赛仅参赛人员可见时，隐藏比赛所有信息
- Enh: [web] 支持比赛任意题目的删除
- Bug: [web] polygon 全部删除输入输出文件
- Bug: [web、polygon] polygon 无法根据标程出数据。需要重新对 polygon 进行编译
- Enh: [web] 显示比赛结束后的榜单
- Bug: [web] 比赛结束后的提交导致榜单页面出错
- Enh: [web] 添加删除小组、删除小组比赛功能
- Enh: [web] 中文化测评状态

0.8.0 2019.3.3
------------------
- Enh: [web] 添加 VIP 用户权限，可以将题目设为只有 VIP 用户可见
- Bug: [web] 修复 VIP 题目查询问题
- Bug: [web] 编辑私有题目时无法保存
- Enh: [web、judge] 对 Special Judge 引入 `testlib.h`，**该功能会导致与旧有的 Special Judge 写法不兼容**，
SPJ 的参数输入顺序修改为输入文件、选手输出、标准答案。**为保证SPJ题目的准确性，更新后需要你改写题目的SPJ**。具体参考OJ 的 Wiki。示例区别在于：
旧版本SPJ写法示例为`FILE * f_in = fopen(args[1],"r"); FILE * f_outr = fopen(args[2],"r");FILE * f_use = fopen(args[3],"r");`，
新版本SPJ写法示例为`FILE * f_in = fopen(args[1],"r"); FILE * f_user = fopen(args[2],"r");FILE * f_out = fopen(args[3],"r");`
- Enh: [web] 添加题目检索功能

0.7.0 2019.2.1
------------------------
- Enh: 中文化部分英文
- Bug: 修改密码后其它浏览器仍然可以自动登录
- Bug: 后台无法修改用户密码
- Enh: 增加 php 扩展缺失未能使用某些功能的提示
- Enh: 提交代码后自动刷新判题结果的状态
- Bug: 作业权限问题
- Enh: 完善题目讨论功能
- Bug: 样例2,3的输入为0时不能显示

0.6.0 2018.12.26
-----------------------
- Enh: 静态资源带版本号
- Bug: 比赛倒计时采用客户端时间的问题
- Chg: 执行 composer update 更新 vendor 
- Bug: 从其它OJ导入题目时可能导致的单词换行问题
- Chg: 优化未参赛用户对比赛页面的访问
- Enh: 比赛信息页面的题目列表显示过题状态
- Bug: 比赛批量生成帐号时间过长导致无法生成
- Bug: SPJ题目不可判
- Bug: 测试数据 out 文件无法上传
- Bug: 可能出现判题无结果的现象
- Bug: SPJ 模板的问题
- Bug: 榜单 E 的计算问题
- Enh: 封榜后以 pending 状态显示提交次数
- Bug: 提交代码的编辑器显示出错
- Enh: 可以在比赛页面设置题目显示状态
- Chg: 默认开启 O2
- Enh: 可以批量添加打星参赛用户
- Enh: 可以设置管理员
- Bug: 查看出错数据的权限问题
- Enh: 后台可编辑 SPJ 程序
- Chg: 问题页面查看代码
- Chg: 更新 vendor，移去一个不需要的插件
- Chg: 封榜后显示提交次数
- Bug: 滚榜及榜单的一些问题
- Bug: 题目页面无法上传数据
- Bug: 网站启用 https 的 socket 连接问题
- Bug: 无法发布多个公告

0.5.0 2018.12.2
-----------------------
- Chg: 优化线下赛参赛用户的个人主页
- Enh: 让代码打印页面支持浏览器打印
- Enh: 通过修改配置文件 `config/params.php` 设置封榜时间
- Bug: 滚榜显示打星队伍的问题
- Enh: 提交队列显示题目名称
- Bug: 比赛队列因 Pjax 需刷新才能查看代码等信息的问题
- Enh: 发布打印请求或者答疑时，给管理员发布弹窗信息
- Enh: 可以下载数据文件
- Enh: 可以在后台比赛页面为题目批量设置题目来源

0.4.0 2018.11.24
-----------------------

- Bug: 封榜后不再显示别人的提交
- Enh: 通过修改配置文件 `config/params.php` 的 `isShareCode` 参数来确定用户是否公开自己的代码
- Enh: 完善积分段位
- Bug: 修复上传图片功能
- Bug: 修复普通用户可以查看隐藏状态下题目信息
- Enh: 完善验题功能
- Enh: 多次登录失败后，出现验证码以提高安全性
- Bug: 重要的安全更新
- Bug: 比赛中无法给某个用户发送回复弹窗
- Enh: 批量同步 polygon 题目到题库中

0.3.0 2018.10.3
----------------

- Enh: 导入 hustoj 题目的功能
- Chg: 将 Markdown 编辑器换成富文本编辑器（为兼容其它OJ的数据迁移）
- Enh: 测试数据上传文件的功能
- Chg: KaTeX公式风格习惯调整（单个$识别符号为行内公式，双个$识别符号为多行公式）
- Enh: 完善题数排行页面的功能
- Bug: QQ号改为长整型
- Bug: 修复个人赛排序方式
- Enh: 在问题列表页面，对已解决问题增加个提示标签
- Bug: 修复rating计算
- Bug: 调整缓存依赖
- Enh: 代码高亮
- Enh: 代码编辑器
- Chg: 删除多余的管理员权限
- Enh: 在Polygon中添加验题的功能